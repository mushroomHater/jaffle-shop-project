version: 2

sources:
  - name: ecom
    description: "E-commerce data for the Jaffle Shop - 6-year dataset (2016-2022)"
    database: ANALYTICS
    schema: RAW
    tables:
      - name: raw_customers
        description: "Customer data with 6 years of history (3,102 customers)"
        columns:
          - name: id
            description: "Unique customer identifier"
            tests:
              - unique
              - not_null
          - name: name
            description: "Customer name"
            tests:
              - not_null

      - name: raw_orders
        description: "Order data with 6 years of history (2,088,006 orders)"
        loaded_at_field: ordered_at
        columns:
          - name: id
            description: "Unique order identifier"
            tests:
              - unique
              - not_null
          - name: customer
            description: "Customer ID (foreign key)"
            tests:
              - not_null
          - name: ordered_at
            description: "Order timestamp"
            tests:
              - not_null
          - name: store_id
            description: "Store ID (foreign key)"
            tests:
              - not_null
          - name: subtotal
            description: "Order subtotal in cents"
            tests:
              - not_null
          - name: tax_paid
            description: "Tax paid in cents"
          - name: order_total
            description: "Total order amount in cents"
            tests:
              - not_null

      - name: raw_order_items  # ‚Üê CHANGED FROM 'raw_items' TO 'raw_order_items'
        description: "Order line items with 6 years of history (3,024,215 items)"
        columns:
          - name: id
            description: "Unique order item identifier"
            tests:
              - unique
              - not_null
          - name: order_id
            description: "Order ID (foreign key)"
            tests:
              - not_null
          - name: sku
            description: "Product SKU (foreign key)"
            tests:
              - not_null

      - name: raw_products
        description: "Product catalog (10 products)"
        columns:
          - name: sku
            description: "Product SKU (primary key)"
            tests:
              - unique
              - not_null
          - name: name
            description: "Product name"
            tests:
              - not_null
          - name: type
            description: "Product type/category"
          - name: price
            description: "Product price in cents"
            tests:
              - not_null
          - name: description
            description: "Product description"

      - name: raw_supplies
        description: "Supply/inventory data (65 supplies)"
        columns:
          - name: id
            description: "Supply identifier"
            tests:
              - not_null
          - name: name
            description: "Supply name"
            tests:
              - not_null
          - name: cost
            description: "Supply cost in cents"
          - name: perishable
            description: "Whether supply is perishable"
          - name: sku
            description: "Product SKU (foreign key)"

      - name: raw_stores
        description: "Store locations and details (12 stores)"
        loaded_at_field: opened_at
        columns:
          - name: id
            description: "Unique store identifier"
            tests:
              - unique
              - not_null
          - name: name
            description: "Store name"
            tests:
              - not_null
          - name: opened_at
            description: "Store opening date"
          - name: tax_rate
            description: "Store tax rate"